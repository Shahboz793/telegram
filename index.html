<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RESTORAN â€” Tez yetkazib berish</title>

  <!-- STYLE -->
  <link rel="stylesheet" href="style.css">

  <!-- FIREBASE APP.JS -->
  <script defer src="app.js"></script>

  <!-- SOUND -->
  <audio id="notifySound" src="ding.mp3" preload="auto"></audio>
</head>

<body class="theme-dark">

<!-- =========================================
     HEADER
========================================= -->
<header class="app-header">
  <div class="logo-wrap">
    <div class="logo-circle">ğŸ½</div>
    <div class="logo-text">
      <div class="logo-title">RESTORAN</div>
      <div class="logo-sub">Tez yetkazib berish</div>
    </div>
  </div>

  <div class="header-right">

    <!-- ğŸ‘‘ ADMIN KIRISH TUGMASI (ENG MUHIM) -->
    <button id="adminAccessBtn" class="icon-btn">ğŸ‘‘ Admin uchun</button>

    <!-- THEME (kun/tun) -->
    <button id="themeToggleBtn" class="icon-btn">ğŸŒ™</button>

    <!-- SAVAT -->
    <button class="cart-top-btn" onclick="toggleCartSheet(true)">
      ğŸ›’ Savat <span class="pill"><span id="cartCountTop">0</span></span>
      <span id="cartTotalTop" class="cart-top-total">0 soâ€˜m</span>
    </button>
  </div>
</header>

<!-- =========================================
     TABS
========================================= -->
<nav id="tabs" class="tabs">
  <button class="tab-btn active" data-page="shopPage">Menyu</button>
  <button class="tab-btn" data-page="ordersPage">Buyurtmalarim</button>
  <button class="tab-btn hidden" id="adminTabBtn" data-page="adminPage">Admin</button>
</nav>

<!-- =========================================
     MIJOZ MAâ€™LUMOTI PANELI
========================================= -->
<section class="customer-panel">
  <div id="customerInfoText">Mijoz: MaÊ¼lumot kiritilmagan</div>
  <div class="customer-actions">
    <button onclick="editCustomerInfo()" class="btn-sm">MaÊ¼lumotni oâ€˜zgartirish</button>
    <button onclick="getOrAskLocation()" class="btn-sm">ğŸ“ Lokatsiya</button>
  </div>
</section>

<!-- =========================================
     SEARCH BAR
========================================= -->
<div class="search-wrap">
  <input id="searchInput" type="text" placeholder="Ovqat qidirish...">
</div>

<!-- =========================================
     CATEGORY FILTER
========================================= -->
<div id="filterBar" class="filter-bar"></div>

<!-- =========================================
     SHOP PAGE (PRODUCTS)
========================================= -->
<section id="shopPage" class="page">

  <div id="productsGrid" class="products-grid"></div>

</section>

<!-- =========================================
     BUYURTMALAR PAGE
========================================= -->
<section id="ordersPage" class="page hidden">
  <h2 class="section-title">Buyurtmalarim</h2>
  <div id="clientOrdersList"></div>
</section>

<!-- =========================================
     ADMIN PAGE
========================================= -->
<section id="adminPage" class="page hidden">

  <h2 class="section-title">Admin paneli</h2>

  <!-- KATEGORIYA FORM -->
  <div class="admin-box">
    <h3>Kategoriya qoâ€˜shish</h3>
    <input id="adminCatCode" placeholder="kod (masalan: lavash)">
    <input id="adminCatLabel" placeholder="nomi (masalan: Lavashlar)">
    <input id="adminCatEmoji" placeholder="emoji (masalan: ğŸŒ¯)">
    <button onclick="saveCategory()">Saqlash</button>
    <div id="adminCategoryList"></div>
  </div>

  <!-- MAHSULOT FORM -->
  <div class="admin-box">
    <h3>Mahsulot qoâ€˜shish</h3>
    <input id="adminName" placeholder="Nom...">
    <input id="adminPriceBase" placeholder="Narx..." type="number">
    <label><input id="adminHasDiscount" type="checkbox"> Chegirma bormi?</label>
    <input id="adminPriceDiscount" placeholder="Chegirma narxi..." type="number">
    <select id="adminCategory"></select>
    <input id="adminTag" placeholder="Teg: Masalan 'Ommabop'">
    <textarea id="adminDescription" placeholder="Tavsif..."></textarea>
    <input id="adminImages" placeholder="rasmlar: img1, img2">

    <button class="admin-btn" onclick="addCustomProduct()">â• Mahsulotni qoâ€˜shish</button>

    <h3>Mavjud mahsulotlar</h3>
    <div id="adminCustomList"></div>
  </div>

  <!-- BUYURTMALAR -->
  <div class="admin-box">
    <h3>Buyurtmalar</h3>
    <div id="adminOrdersList"></div>
  </div>

  <!-- KURYER PANEL -->
  <div class="admin-box">
    <h3>Kuryer xaritasi</h3>

    <select id="courierOrderSelect"></select>

    <div class="courier-actions">
      <button onclick="openSelectedCourierExternal()">ğŸ“ Marshrut</button>
      <button onclick="centerToCourier()">ğŸš¶ Mening joylashuvimdan</button>
    </div>

    <iframe id="courierMapFrame" class="courier-map"></iframe>

    <div id="courierInfo" class="courier-info"></div>

  </div>

</section>

<!-- =========================================
     CART BOTTOM SHEET
========================================= -->
<div id="cartSheetOverlay" class="sheet-overlay" onclick="toggleCartSheet(false)"></div>

<div id="cartSheet" class="cart-sheet">
  <h3>Savat</h3>
  <div id="cartItems"></div>
  <div class="cart-sheet-footer">
    <span id="cartSheetTotal">0 soâ€˜m</span>
    <button onclick="sendOrder()" class="btn-primary">Buyurtma berish</button>
  </div>
</div>

<!-- =========================================
     PRODUCT DETAIL OVERLAY
========================================= -->
<div id="productDetailOverlay" class="detail-overlay hidden">
  <div class="detail-card">

    <div class="detail-img-wrap">
      <img id="detailImage">
      <div class="detail-img-nav">
        <button id="detailPrevBtn">â—€</button>
        <div id="detailImageIndex"></div>
        <button id="detailNextBtn">â–¶</button>
      </div>
    </div>

    <div class="detail-info">
      <span id="detailCategory" class="detail-category"></span>
      <h3 id="detailName"></h3>
      <small id="detailTag" class="detail-tag"></small>
      <p id="detailDesc"></p>

      <div class="detail-prices">
        <span id="detailPrice" class="detail-price"></span>
        <span id="detailOldPrice" class="detail-old hidden"></span>
      </div>

      <div class="detail-qty">
        <button id="detailQtyMinus">-</button>
        <span id="detailQtyValue">1</span>
        <button id="detailQtyPlus">+</button>
      </div>

      <button id="detailAddBtn" class="btn-primary">ğŸ›’ Savatga qoâ€˜shish</button>
      <button id="detailBackBtn" class="btn-secondary hidden">â—€ Orqaga</button>
    </div>

  </div>
</div>

<!-- TOAST -->
<div id="toast"></div>

</body>
</html>
