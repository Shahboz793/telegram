<!-- index.html -->
<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <title>ONLINE MAGAZIN YANGIOBOD â€” Kosmetika do'koni</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="page">
    <header class="header">
      <div class="header-left">
        <div class="logo-circle">ğŸ’„</div>
        <div class="logo-text">
          <div class="logo-title">ONLINE MAGAZIN</div>
          <div class="logo-sub">YangÄ±obod â€¢ Beauty Pro</div>
        </div>
      </div>
      <div class="header-center">
        <div class="search-wrap">
          <span class="search-icon">ğŸ”</span>
          <input id="searchInput" type="search" placeholder="Mahsulot qidirish..." />
        </div>
      </div>
      <div class="header-right">
        <button id="themeToggleBtn" class="icon-btn" type="button">ğŸŒ™</button>
        <button class="cart-icon-btn" type="button" onclick="toggleCartSheet()">
          <span>ğŸ§º</span>
          <span id="cartCountTop">0</span>
        </button>
        <div class="cart-total-top">
          <span id="cartTotalTop">0 soâ€˜m</span>
        </div>
        <button id="adminAccessBtn" class="admin-access-btn" type="button">ğŸ‘‘ Admin uchun</button>
      </div>
    </header>

    <main class="main">
      <div id="customerInfoText" class="customer-info"></div>

      <nav id="tabs" class="tabs">
        <button class="tab-btn active" data-page="shopPage">ğŸ›’ Magazin</button>
        <button class="tab-btn" data-page="historyPage">ğŸ“œ Buyurtmalar</button>
        <button id="adminTabBtn" class="tab-btn hidden" data-page="adminPage">ğŸ‘‘ Admin panel</button>
      </nav>

      <section id="shopPage" class="page-section">
        <div id="filterBar" class="filter-bar"></div>
        <div id="productsGrid" class="products-grid"></div>
      </section>

      <section id="historyPage" class="page-section hidden">
        <h2 class="section-title">Buyurtmalar tarixi</h2>
        <div id="historyList" class="history-list"></div>
        <button class="btn-secondary" type="button" onclick="clearHistory()">Tarixni tozalash</button>
      </section>

      <section id="adminPage" class="page-section hidden">
        <h2 class="section-title">Mahsulotlar</h2>
        <form class="admin-form" onsubmit="event.preventDefault(); addCustomProduct();">
          <div class="form-row">
            <label>Mahsulot nomi</label>
            <input id="adminName" type="text" placeholder="Masalan, Mat pomada" />
          </div>
          <div class="form-row">
            <label>Kategoriya</label>
            <select id="adminCategory"></select>
          </div>
          <div class="form-row form-row-2">
            <div>
              <label>Asosiy narx (so'm)</label>
              <input id="adminPriceBase" type="number" min="0" placeholder="120000" />
            </div>
            <div>
              <label class="checkbox-inline">
                <input id="adminHasDiscount" type="checkbox" />
                Chegirma narxi bor
              </label>
              <input id="adminPriceDiscount" type="number" min="0" placeholder="99000" />
            </div>
          </div>
          <div class="form-row">
            <label>Tag</label>
            <input id="adminTag" type="text" placeholder="Ommabop mahsulot" />
          </div>
          <div class="form-row">
            <label>Tavsif</label>
            <textarea id="adminDescription" rows="3" placeholder="Mahsulot haqida qisqacha tavsif"></textarea>
          </div>
          <div class="form-row">
            <label>Rasm linklari (vergul bilan)</label>
            <input id="adminImages" type="text" placeholder="pomada1, pomada2 yoki https://..." />
          </div>
          <button class="btn-primary admin-btn" type="submit">
            â• Mahsulotni qoâ€˜shish (Firestore)
          </button>
        </form>

        <h2 class="section-title section-title-sub">Kategoriyalar</h2>
        <form class="admin-form" onsubmit="event.preventDefault(); saveCategory();">
          <div class="form-row form-row-2">
            <div>
              <label>Kategoriya kodi</label>
              <input id="adminCatCode" type="text" placeholder="pomada, krem, parfyum" />
            </div>
            <div>
              <label>Kategoriya nomi</label>
              <input id="adminCatLabel" type="text" placeholder="Pomadalar, Kremlar" />
            </div>
          </div>
          <div class="form-row">
            <label>Emoji</label>
            <input id="adminCatEmoji" type="text" placeholder="ğŸ’„" />
          </div>
          <button class="btn-primary" type="submit">
            ğŸ’¾ Kategoriyani saqlash
          </button>
        </form>

        <h2 class="section-title section-title-sub">Mahsulotlar roâ€˜yxati</h2>
        <div id="adminCustomList" class="admin-list"></div>

        <h2 class="section-title section-title-sub">Kategoriyalar roâ€˜yxati</h2>
        <div id="adminCategoryList" class="admin-list"></div>
      </section>
    </main>
  </div>

  <div id="cartSheetOverlay" class="cart-sheet-overlay" onclick="toggleCartSheet(false)"></div>
  <aside id="cartSheet" class="cart-sheet">
    <div class="cart-sheet-header">
      <div class="cart-sheet-title">Savat</div>
      <button class="cart-close-btn" type="button" onclick="toggleCartSheet(false)">âœ•</button>
    </div>
    <div id="cartItems" class="cart-sheet-body"></div>
    <div class="cart-sheet-footer">
      <div class="cart-total-row">
        <span>Jami:</span>
        <span id="cartSheetTotal">0 soâ€˜m</span>
      </div>
      <button class="btn-primary btn-full" type="button" onclick="sendOrder()">ğŸ“© Buyurtmani yuborish</button>
    </div>
  </aside>

  <div id="toast" class="toast"></div>

  <div id="productDetailOverlay" class="detail-overlay hidden">
    <div class="detail-card">
      <div class="detail-top">
        <div class="detail-img-wrap">
          <img id="detailImage" src="" alt="Mahsulot" />
          <div class="detail-gallery-nav">
            <button id="detailPrevBtn" type="button">â—€</button>
            <span id="detailImageIndex">1 / 1</span>
            <button id="detailNextBtn" type="button">â–¶</button>
          </div>
        </div>
        <div class="detail-content">
          <div class="detail-chip" id="detailCategory">Kategoriya</div>
          <h1 id="detailName" class="detail-name">Mahsulot nomi</h1>
          <div id="detailTag" class="detail-tag"></div>
          <p id="detailDesc" class="detail-desc"></p>
          <div class="detail-price-row">
            <div class="detail-price-main" id="detailPrice">0 soâ€˜m</div>
            <div class="detail-price-old hidden" id="detailOldPrice">0 soâ€˜m</div>
          </div>
          <div class="detail-qty-row">
            <div class="detail-qty-label">Miqdor</div>
            <div class="detail-qty-control">
              <button id="detailQtyMinus" type="button">-</button>
              <span id="detailQtyValue">1</span>
              <button id="detailQtyPlus" type="button">+</button>
            </div>
          </div>
          <div class="detail-actions">
            <button id="detailAddBtn" class="btn-primary detail-add-btn" type="button">
              ğŸ›’ Savatga qoâ€˜shish
            </button>
            <button id="detailBackBtn" class="btn-secondary detail-back-btn hidden" type="button">
              â—€ Magaziniga qaytish
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
