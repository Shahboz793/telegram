<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RESTORAN â€” Tez yetkazib berish</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- STYLE -->
  <link rel="stylesheet" href="style.css" />

  <!-- SCRIPT â€“ MODULE SIFATIDA -->
  <script type="module" src="app.js"></script>
</head>

<body>

  <!-- HEADER -->
  <header class="app-header">
    <div class="logo-wrap">
      <div class="logo-circle">ğŸ½ï¸</div>
      <div class="logo-text">
        <div class="logo-title">RESTORAN</div>
        <div class="logo-sub">Tez yetkazib berish</div>
      </div>
    </div>

    <div class="header-right">
      <button id="adminAccessBtn" class="icon-btn">ğŸ‘‘ Admin uchun</button>
      <button id="themeToggleBtn" class="icon-btn">ğŸŒ™</button>

      <button class="cart-top-btn" onclick="toggleCartSheet()">
        <span>ğŸ›’ Savat</span>
        <span id="cartCountTop" class="pill">0</span>
        <span id="cartTotalTop">0 soâ€˜m</span>
      </button>
    </div>
  </header>

  <!-- TABS -->
  <div id="tabs" class="tabs">
    <button data-page="shopPage" class="tab-btn active">Menyu</button>
    <button data-page="ordersPage" class="tab-btn">Buyurtmalarim</button>
    <button data-page="adminPage" id="adminTabBtn" class="tab-btn hidden">Admin</button>
  </div>

  <!-- CUSTOMER PANEL -->
  <section class="customer-panel">
    <div id="customerInfoText" class="customer-info">Mijoz: Maâ€™lumot kiritilmagan</div>

    <div class="customer-actions">
      <button onclick="editCustomerInfo()" class="btn-outline">Maâ€™lumotni oâ€˜zgartirish</button>
      <button onclick="getOrAskLocation()" class="btn-outline">ğŸ“ Lokatsiya</button>
    </div>
  </section>

  <!-- SEARCH -->
  <div class="shop-toolbar">
    <input id="searchInput" class="search-input" placeholder="Ovqat qidirish..." />
  </div>

  <!-- CATEGORY CHIPS -->
  <div id="filterBar" class="chips-row"></div>

  <!-- SHOP PAGE -->
  <main id="shopPage" class="page-wrap">
    <div id="productsGrid" class="products-grid"></div>
  </main>

  <!-- ORDERS PAGE -->
  <main id="ordersPage" class="page-wrap hidden">
    <h2 class="section-title">Buyurtmalarim</h2>
    <p class="section-sub">Buyurtmalar holatini real vaqt rejimida kuzating</p>
    <div id="clientOrdersList"></div>
  </main>

  <!-- ADMIN PAGE -->
  <main id="adminPage" class="page-wrap hidden admin-page">

    <!-- Kategoriya boshqaruvi -->
    <div class="admin-cols">
      <div class="admin-col">
        <div class="card">
          <div class="card-title">Kategoriya qoâ€˜shish</div>

          <div class="form-grid">
            <label>Kod:
              <input id="adminCatCode" placeholder="masalan: lavash" />
            </label>

            <label>Nom:
              <input id="adminCatLabel" placeholder="Kategoriya nomi" />
            </label>

            <label>Emoji:
              <input id="adminCatEmoji" placeholder="ğŸ”" />
            </label>
          </div>

          <button onclick="saveCategory()" class="btn-primary btn-full admin-btn" style="margin-top:10px;">
            â• Saqlash
          </button>

          <h3 class="card-sub">Kategoriyalar roâ€˜yxati</h3>
          <div id="adminCategoryList" class="admin-list"></div>
        </div>
      </div>

      <!-- Mahsulot boshqaruvi -->
      <div class="admin-col">
        <div class="card">
          <div class="card-title">Mahsulot qoâ€˜shish</div>

          <div class="form-grid">
            <label>Nomi:
              <input id="adminName" placeholder="Mahsulot nomi" />
            </label>

            <label>Kategoriya:
              <select id="adminCategory"></select>
            </label>

            <label>Asosiy narx:
              <input id="adminPriceBase" type="number" placeholder="10000" />
            </label>

            <label>
              <input type="checkbox" id="adminHasDiscount" />
              Chegirma bor
            </label>

            <label>Chegirmadagi narx:
              <input id="adminPriceDiscount" type="number" placeholder="9000" />
            </label>

            <label>Tegr (tag):
              <input id="adminTag" placeholder="Yangi, issiq..." />
            </label>

            <label>Tavsif:
              <textarea id="adminDescription"></textarea>
            </label>

            <label>Rasmlar (vergul bilan):
              <input id="adminImages" placeholder="lavash.png, cola.png" />
            </label>
          </div>

          <button onclick="addCustomProduct()" class="btn-primary btn-full admin-btn" style="margin-top:10px;">
            â• Mahsulotni qoâ€˜shish
          </button>

          <h3 class="card-sub">Mahsulotlar roâ€˜yxati</h3>
          <div id="adminCustomList" class="admin-list"></div>
        </div>
      </div>

      <!-- Buyurtmalar boshqaruvi -->
      <div class="admin-col">
        <div class="card">
          <div class="card-title">Buyurtmalar boshqaruvi</div>
          <div id="adminOrdersList"></div>
        </div>

        <!-- Kuryer xarita paneli -->
        <div class="card" style="margin-top:16px;">
          <div class="card-title">Kuryer marshruti</div>

          <select id="courierOrderSelect" class="search-input"></select>

          <iframe id="courierMapFrame"
                  style="width:100%;height:260px;border-radius:12px;margin-top:10px;"
                  loading="lazy"></iframe>

          <div id="courierInfo" style="margin-top:8px;font-size:13px;color:#e5e7eb;"></div>

          <button onclick="openSelectedCourierExternal()" class="btn-primary btn-full" style="margin-top:10px;">
            ğŸ“ Marshrutni ochish (Google Maps)
          </button>

          <button onclick="centerToCourier()" class="btn-primary btn-full" style="margin-top:10px;">
            ğŸ“ Mening joylashuvimdan yoâ€˜l
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- CART SHEET -->
  <div id="cartSheetOverlay" class="overlay" onclick="toggleCartSheet(false)"></div>

  <div id="cartSheet" class="cart-sheet">
    <header>
      <h2>Savat</h2>
      <button onclick="toggleCartSheet(false)">âœ•</button>
    </header>

    <div id="cartItems"></div>

    <div class="cart-sheet-total-row">
      Jami: <span id="cartSheetTotal">0 soâ€˜m</span>
    </div>

    <button onclick="sendOrder()" class="btn-primary btn-full">ğŸ“¨ Buyurtma berish</button>
  </div>

  <!-- PRODUCT DETAIL OVERLAY -->
  <div id="productDetailOverlay" class="detail-overlay hidden">
    <div class="detail-card">
      <button class="detail-close" onclick="closeProductDetail()">âœ•</button>

      <div class="detail-img-wrap">
        <button id="detailPrevBtn" class="detail-nav-btn">â€¹</button>
        <img id="detailImage" src="" alt="">
        <button id="detailNextBtn" class="detail-nav-btn">â€º</button>
        <div id="detailImageIndex" class="detail-img-index">1/1</div>
      </div>

      <div class="detail-body">
        <div id="detailCategory" class="detail-category"></div>
        <div id="detailName" class="detail-name"></div>
        <div id="detailTag" class="detail-tag"></div>
        <div id="detailDesc" class="detail-desc"></div>

        <div class="detail-price-row">
          <div>
            <div id="detailPrice" class="detail-price-main"></div>
            <div id="detailOldPrice" class="detail-price-old hidden"></div>
          </div>

          <div class="qty-control">
            <button id="detailQtyMinus">-</button>
            <span id="detailQtyValue">1</span>
            <button id="detailQtyPlus">+</button>
          </div>
        </div>

        <button id="detailAddBtn">ğŸ›’ Savatga qoâ€˜shish</button>
        <button id="detailBackBtn" class="hidden">â—€ Magaziniga qaytish</button>

        <div id="detailGalleryList" class="detail-gallery"></div>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- SOUND -->
  <audio id="notifySound" src="ding.mp3" preload="auto"></audio>

</body>
</html>
