<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Online Magazin â€” Premium</title>

<link rel="stylesheet" href="style.css">

<!-- Telegram WebApp Script -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

</head>
<body data-theme="light">

<!-- ======================= HEADER ======================= -->
<header class="header">
  <div class="hdr-left">
    <div class="logo">Magazin</div>
  </div>

  <div class="hdr-right">
    <button id="themeToggleBtn" class="hdr-btn">ğŸŒ™</button>
    <button class="cart-btn" onclick="toggleCartSheet(true)">
      ğŸ›’ <span id="cartCountTop">0</span>
    </button>
  </div>
</header>

<!-- ======================= CATEGORY FILTER ======================= -->
<div id="filterBar" class="filter-bar"></div>

<!-- ======================= SEARCH ======================= -->
<div class="search-wrap">
  <input id="searchInput" class="search-input" placeholder="Mahsulot qidirish...">
</div>

<!-- ======================= PRODUCT GRID ======================= -->
<div id="productsGrid" class="products-grid"></div>

<!-- ======================= CART SHEET ======================= -->
<div id="cartSheetOverlay" class="sheet-overlay" onclick="toggleCartSheet(false)"></div>

<div id="cartSheet" class="cart-sheet">
  <div class="sheet-header">
    <div class="sheet-title">Savat</div>
    <button class="sheet-close" onclick="toggleCartSheet(false)">âœ•</button>
  </div>

  <div id="cartItems" class="cart-items"></div>

  <div class="sheet-footer">
    <div class="total-row">
      <span>Jami:</span>
      <b id="cartSheetTotal">0 soâ€˜m</b>
    </div>

    <button class="btn-primary" onclick="sendOrder()">
      Buyurtmani yuborish
    </button>
  </div>
</div>

<!-- ======================= PRODUCT DETAIL OVERLAY ======================= -->
<div id="productDetailOverlay" class="detail-overlay hidden">
  <div class="detail-card">

    <div class="detail-img-box">
      <button id="detailPrevBtn" class="nav-btn left">â€¹</button>
      <img id="detailImage" class="detail-img">
      <button id="detailNextBtn" class="nav-btn right">â€º</button>

      <div id="detailImageIndex" class="img-index">1/1</div>
    </div>

    <div class="detail-body">
      <div id="detailCategory" class="detail-category"></div>
      <div id="detailName" class="detail-name"></div>
      <div id="detailTag" class="detail-tag"></div>

      <div class="detail-desc">
        <p id="detailDesc"></p>
      </div>

      <div class="detail-prices">
        <span id="detailPrice" class="price-main"></span>
        <span id="detailOldPrice" class="price-old hidden"></span>
      </div>

      <div class="qty-box">
        <button id="detailQtyMinus" class="qty-btn">âˆ’</button>
        <span id="detailQtyValue" class="qty-val">1</span>
        <button id="detailQtyPlus" class="qty-btn">+</button>
      </div>

      <button id="detailAddBtn" class="btn-primary detail-add-btn">
        ğŸ›’ Savatga qoâ€˜shish
      </button>

      <button id="detailBackBtn" class="btn-back hidden">
        â—€ Magaziniga qaytish
      </button>
    </div>
  </div>
</div>

<!-- ======================= TOAST ======================= -->
<div id="toast" class="toast"></div>

<!-- ======================= AUDIO FILES ======================= -->
<audio id="sNew" src="audio/new.mp3"></audio>
<audio id="sConfirmed" src="audio/confirmed.mp3"></audio>
<audio id="sCourier" src="audio/courier.mp3"></audio>
<audio id="sDelivered" src="audio/delivered.mp3"></audio>
<audio id="sRejected" src="audio/rejected.mp3"></audio>

<!-- ======================= TABS ======================= -->
<div class="tabs">
  <button class="tab-btn active" data-page="shopPage">ğŸ› Magazin</button>
  <button class="tab-btn" data-page="customerOrdersPage">ğŸ“¦ Buyurtmalarim</button>
  <button id="adminTabBtn" class="tab-btn hidden" data-page="adminPage">ğŸ‘‘ Admin</button>
</div>

<!-- ======================= PAGES ======================= -->
<div id="shopPage" class="page">
</div>

<div id="customerOrdersPage" class="page hidden">
  <h2 class="page-title">Mening buyurtmalarim</h2>
  <div id="customerOrdersList"></div>
</div>

<div id="adminPage" class="page hidden">
  <h2 class="page-title">Admin panel</h2>

  <button id="adminAccessBtn" class="admin-access-btn">
    Admin kirish
  </button>

  <h3 class="admin-subtitle">Yangi mahsulot qoâ€˜shish</h3>
  <div class="admin-form">
    <input id="adminName" placeholder="Mahsulot nomi">
    <input id="adminPriceBase" placeholder="Asosiy narx" type="number">

    <label class="check-row">
      <input id="adminHasDiscount" type="checkbox">
      <span>Chegirma bor</span>
    </label>

    <input id="adminPriceDiscount" placeholder="Chegirmali narx" type="number">
    <select id="adminCategory"></select>

    <input id="adminTag" placeholder="Tag (ixtiyoriy)">
    <textarea id="adminDescription" placeholder="Tavsif"></textarea>
    <input id="adminImages" placeholder="Rasmlar: img1.png, img2.png">

    <button class="btn-primary" onclick="addCustomProduct()">
      Mahsulotni qoâ€˜shish
    </button>
  </div>

  <h3 class="admin-subtitle">Kategoriyalar</h3>
  <div class="admin-form">
    <input id="adminCatCode" placeholder="Kod (masalan: pomada)">
    <input id="adminCatLabel" placeholder="Nom (masalan: Pomada)">
    <input id="adminCatEmoji" placeholder="Emoji (ğŸ’„)">
    <button class="btn-primary" onclick="saveCategory()">Kategoriya qoâ€˜shish</button>
  </div>

  <div id="adminCategoryList"></div>

  <h3 class="admin-subtitle">Buyurtmalar</h3>
  <div id="adminOrdersList"></div>
</div>

<!-- ======================= APP SCRIPT ======================= -->
<script src="app.js" type="module"></script>

</body>
</html>
