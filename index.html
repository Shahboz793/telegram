<!doctype html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premium FastFood â€” Beauty Store</title>

  <!-- Sizning umumiy uslublaringiz: -->
  <link rel="stylesheet" href="style.css" />

  <!-- Favicon (ixtiyoriy) -->
  <link rel="icon" href="favicon.ico" />
</head>
<body class="theme-dark">

  <!-- ===================== TOP BAR ===================== -->
  <header class="topbar">
    <div class="topbar-left">
      <div class="logo">ğŸ’„</div>
      <div class="brand">
        <div class="brand-title">Premium Beauty Store</div>
        <div class="brand-sub">Express yetkazish</div>
      </div>
    </div>

    <div class="topbar-center">
      <div class="search-wrap">
        <input id="searchInput" class="search-input" type="search" placeholder="Qidirish: niqob, atir, krem..." />
      </div>
      <button id="themeToggleBtn" class="btn-icon" title="Tema almashtirish">ğŸŒ™</button>
    </div>

    <div class="topbar-right">
      <div class="cart-brief">
        <button class="btn-cart" onclick="toggleCartSheet(true)">
          ğŸ›’ <span id="cartCountTop">0</span>
        </button>
        <div class="cart-brief-sum" id="cartTotalTop">0 soâ€˜m</div>
      </div>
      <button id="adminAccessBtn" class="btn-chip">ğŸ‘‘ Admin uchun</button>
    </div>
  </header>

  <!-- ================== SHOP TOOLBAR =================== -->
  <section class="shop-toolbar">
    <div class="chips" id="filterBar">
      <!-- Kategoriyalar app.js orqali real-time qoâ€˜yiladi -->
    </div>
  </section>
  <!-- app.js heroPromo() shu .shop-toolbar dan keyin promo slider qoâ€˜shadi -->

  <!-- ================ TABS (SHOP / ORDERS / ADMIN) ================ -->
  <nav id="tabs" class="tabs">
    <button class="tab-btn active" data-page="shopPage">ğŸ› Magazin</button>
    <button class="tab-btn" data-page="ordersPage">ğŸ“¦ Buyurtmalarim</button>
    <button id="adminTabBtn" class="tab-btn hidden" data-page="adminPage">ğŸ›  Admin</button>
  </nav>

  <!-- ======================== SHOP PAGE ======================== -->
  <main id="shopPage">
    <!-- Mijoz maâ€™lumoti paneli -->
    <section class="customer-panel">
      <div class="customer-info" id="customerInfoText">
        Mijoz maâ€™lumoti hali kiritilmagan.
      </div>
      <div class="customer-actions">
        <button class="btn-soft" onclick="editCustomerInfo()">âœï¸ Tahrirlash</button>
        <button class="btn-soft-danger" onclick="resetCustomerInfo()">ğŸ—‘ Oâ€˜chirish</button>
      </div>
    </section>

    <!-- Mahsulotlar grid -->
    <section id="productsGrid" class="products-grid">
      <!-- app.js renderProducts() bilan toâ€˜ladi -->
    </section>

    <!-- Tezkor buyurtma tugmasi -->
    <button id="quickOrderBtn" class="quick-order-btn hidden" onclick="toggleCartSheet(true)">
      ğŸ§¾ Buyurtmani koâ€˜rish
    </button>
  </main>

  <!-- ===================== ORDERS PAGE ====================== -->
  <section id="ordersPage" class="hidden">
    <header class="section-head">
      <h2>ğŸ“¦ Mening buyurtmalarim</h2>
      <p class="section-sub">Holat real-time yangilanadi.</p>
    </header>
    <div id="clientOrdersList"></div>
  </section>

  <!-- ====================== ADMIN PAGE ======================= -->
  <section id="adminPage" class="hidden">
    <header class="section-head">
      <h2>ğŸ›  Admin panel</h2>
      <p class="section-sub">Mahsulotlar, kategoriyalar va buyurtmalar boshqaruvi.</p>
    </header>

    <!-- ====== Admin: Mahsulot form ====== -->
    <section class="admin-card">
      <h3>ğŸ§´ Mahsulot qoâ€˜shish / tahrirlash</h3>
      <div class="admin-form-grid">
        <label>Nom
          <input id="adminName" placeholder="masalan, Niqob 'Aloe Vera'"/>
        </label>
        <label>Kategoriya
          <select id="adminCategory"></select>
        </label>
        <label>Asosiy narx
          <input id="adminPriceBase" type="number" min="0" placeholder="masalan, 89000"/>
        </label>
        <label class="row-check">
          <input id="adminHasDiscount" type="checkbox" />
          Chegirma bor
        </label>
        <label>Chegirma narxi
          <input id="adminPriceDiscount" type="number" min="0" placeholder="masalan, 69000"/>
        </label>
        <label>Tag (mini yorliq)
          <input id="adminTag" placeholder="masalan, Bestseller"/>
        </label>
        <label>Tavsif
          <textarea id="adminDescription" rows="2" placeholder="Qisqa tavsif"></textarea>
        </label>
        <label>Rasm(lar) â€” URL yoki filename(.png/.jpg), vergul bilan ajrating
          <input id="adminImages" placeholder="mask01.png, https://.../img.jpg"/>
        </label>
      </div>
      <div class="admin-actions">
        <button class="admin-btn" onclick="addCustomProduct()">â• Mahsulotni saqlash</button>
      </div>
    </section>

    <!-- ====== Admin: Kategoriya form ====== -->
    <section class="admin-card">
      <h3>ğŸ—‚ Kategoriya</h3>
      <div class="admin-form-grid">
        <label>Kod
          <input id="adminCatCode" placeholder="masalan, mask"/>
        </label>
        <label>Nomi
          <input id="adminCatLabel" placeholder="masalan, Niqoblar"/>
        </label>
        <label>Emoji
          <input id="adminCatEmoji" placeholder="masalan, ğŸ’†â€â™€ï¸"/>
        </label>
      </div>
      <div class="admin-actions">
        <button class="btn-soft" onclick="saveCategory()">ğŸ’¾ Saqlash</button>
      </div>
      <div class="list" id="adminCategoryList"></div>
    </section>

    <!-- ====== Admin: Mahsulot roâ€˜yxati (Firestore) ====== -->
    <section class="admin-card">
      <h3>ğŸ“ƒ Yangi qoâ€˜shilgan mahsulotlar</h3>
      <div id="adminCustomList" class="list"></div>
    </section>

    <!-- ====== Admin: Buyurtmalar boshqaruvi ====== -->
    <section class="admin-card">
      <h3>ğŸ“¦ Buyurtmalar</h3>
      <div id="adminOrdersList"></div>
    </section>

    <!-- ====== Admin: Kuryer paneli (xarita & marshrut) ====== -->
    <section class="admin-card">
      <h3>ğŸšš Kuryer â€” xarita va marshrut</h3>

      <div class="map-toolbar">
        <select id="courierOrderSelect"></select>
        <div class="map-toolbar-actions">
          <button class="btn-soft" onclick="openSelectedCourierExternal()">ğŸ“ Google Mapsâ€™da ochish</button>
          <button class="btn-soft" onclick="centerToCourier()">ğŸ§­ Oâ€˜zimdan marshrut</button>
        </div>
      </div>

      <div class="map-wrap">
        <iframe id="courierMapFrame" class="map-frame" allowfullscreen loading="lazy"></iframe>
        <div id="courierInfo" class="map-info"></div>
      </div>
    </section>
  </section>

  <!-- ===================== CART SHEET ===================== -->
  <div id="cartSheetOverlay" class="sheet-overlay" onclick="toggleCartSheet(false)"></div>
  <aside id="cartSheet" class="sheet">
    <header class="sheet-head">
      <h3>ğŸ§¾ Savat</h3>
      <button class="btn-icon" onclick="toggleCartSheet(false)">âœ•</button>
    </header>
    <div id="cartItems" class="sheet-body">
      <!-- app.js renderCartItems() bilan toâ€˜ladi -->
    </div>
    <footer class="sheet-foot">
      <div class="sum">
        Jami: <strong id="cartSheetTotal">0 soâ€˜m</strong>
      </div>
      <button class="btn-primary" onclick="sendOrder()">âœ… Buyurtma berish</button>
    </footer>
  </aside>

  <!-- ================ PRODUCT DETAIL OVERLAY ================ -->
  <div id="productDetailOverlay" class="detail-overlay hidden">
    <div class="detail-card">

      <header class="detail-head">
        <button id="detailBackBtn" class="btn-soft hidden">â—€ Magaziniga qaytish</button>
      </header>

      <div class="detail-media">
        <button id="detailPrevBtn" class="nav nav-left">â€¹</button>

        <div class="detail-img-wrap">
          <img id="detailImage" alt="Mahsulot rasmi" />
          <div class="detail-index" id="detailImageIndex">1 / 1</div>
        </div>

        <button id="detailNextBtn" class="nav nav-right">â€º</button>
      </div>

      <div class="detail-body">
        <div class="detail-cat" id="detailCategory">Kategoriya</div>
        <h3 class="detail-name" id="detailName">Mahsulot nomi</h3>
        <div class="detail-tag" id="detailTag"></div>
        <p class="detail-desc" id="detailDesc"></p>

        <div class="detail-price-row">
          <div class="price-main" id="detailPrice">0 soâ€˜m</div>
          <div class="price-old hidden" id="detailOldPrice">0 soâ€˜m</div>
        </div>

        <div class="detail-qty">
          <button id="detailQtyMinus" class="btn-icon">âˆ’</button>
          <span id="detailQtyValue">1</span>
          <button id="detailQtyPlus" class="btn-icon">+</button>
        </div>

        <!-- Qoâ€˜shimchalar modulini app.js oâ€˜zi #addonsCard sifatida qoâ€˜shadi -->

        <button id="detailAddBtn" class="btn-primary wide">ğŸ›’ Savatga qoâ€˜shish</button>

        <!-- Pastki skroll galereya (ixtiyoriy) -->
        <div id="detailGalleryList" class="detail-gallery"></div>
      </div>

    </div>
  </div>

  <!-- ===================== TOAST + SOUND ===================== -->
  <div id="toast" class="toast"></div>
  <audio
    id="notifySound"
    src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_5e2b8e7241.mp3?filename=notification-6932.mp3"
    preload="auto">
  </audio>

  <!-- ====================== APP LOGIC ======================= -->
  <script type="module" src="app.js"></script>
</body>
</html>
