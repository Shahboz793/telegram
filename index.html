<!doctype html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <title>Premium Beauty Store â€” Kosmetika onlayn doâ€˜kon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- FONT -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- STYLE -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="theme-dark">

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- NOTIFICATION SOUND -->
  <audio
    id="notifySound"
    src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_5e2b8e7241.mp3?filename=notification-6932.mp3"
    preload="auto">
  </audio>

  <!-- CART OVERLAY -->
  <div id="cartSheetOverlay" class="cart-sheet-overlay" onclick="toggleCartSheet(false)"></div>
  <aside id="cartSheet" class="cart-sheet">
    <header class="cart-sheet-header">
      <h2>Savat</h2>
      <button class="icon-btn" onclick="toggleCartSheet(false)">âœ•</button>
    </header>
    <div id="cartItems" class="cart-items"></div>
    <footer class="cart-sheet-footer">
      <div class="cart-sheet-total-row">
        <span>Jami:</span>
        <span id="cartSheetTotal">0 soâ€˜m</span>
      </div>
      <button class="btn-primary" onclick="sendOrder()">Buyurtmani yuborish</button>
    </footer>
  </aside>

  <!-- PRODUCT DETAIL OVERLAY -->
  <div id="productDetailOverlay" class="detail-overlay hidden">
    <div class="detail-backdrop"></div>
    <article class="detail-card">
      <header class="detail-header">
        <button id="detailBackBtn" class="icon-btn hidden">â—€ Magaziniga qaytish</button>
        <button class="icon-btn" onclick="closeProductDetail()">âœ•</button>
      </header>

      <div class="detail-main">
        <div class="detail-top">
          <div class="detail-img-wrap">
            <button id="detailPrevBtn" class="detail-nav-btn detail-nav-left">â€¹</button>
            <img id="detailImage" src="" alt="Mahsulot rasmi" />
            <button id="detailNextBtn" class="detail-nav-btn detail-nav-right">â€º</button>
            <div id="detailImageIndex" class="detail-image-index">1 / 1</div>
            <div class="detail-hint">
              Rasmga bosib kattalashtirish / qaytarish mumkin
            </div>
          </div>
          <section class="detail-info">
            <div id="detailCategory" class="detail-category">Kategoriya</div>
            <h2 id="detailName" class="detail-name">Mahsulot nomi</h2>
            <div id="detailTag" class="detail-tag"></div>
            <p id="detailDesc" class="detail-desc">
              Mahsulot tavsifi bu yerda koâ€˜rsatiladi.
            </p>

            <div class="detail-price-wrap">
              <div class="detail-price-row">
                <span id="detailPrice" class="detail-price">0 soâ€˜m</span>
                <span id="detailOldPrice" class="detail-old-price hidden">0 soâ€˜m</span>
              </div>
              <div class="detail-qty-row">
                <button id="detailQtyMinus" class="qty-btn">âˆ’</button>
                <span id="detailQtyValue" class="qty-value">1</span>
                <button id="detailQtyPlus" class="qty-btn">+</button>
              </div>
            </div>

            <button id="detailAddBtn" class="btn-primary wide">
              ğŸ›’ Savatga qoâ€˜shish
            </button>
          </section>
        </div>

        <!-- PASTGA SCROLL GALEREYA -->
        <section class="detail-gallery">
          <h3>Rasmlar</h3>
          <div id="detailGalleryList" class="detail-gallery-list">
            <!-- JS orqali toâ€˜ladi -->
          </div>
        </section>
      </div>
    </article>
  </div>

  <!-- MAIN LAYOUT -->
  <div class="app-shell">
    <!-- HEADER -->
    <header class="app-header">
      <div class="header-left">
        <h1 class="app-title">ğŸ’„ Premium Beauty Store</h1>
        <p class="app-subtitle">Kosmetika va parvarish mahsulotlari</p>
      </div>
      <div class="header-right">
        <button id="themeToggleBtn" class="icon-btn">ğŸŒ™</button>
        <div class="cart-top" onclick="toggleCartSheet(true)">
          <span class="cart-label">Savat:</span>
          <span id="cartCountTop" class="cart-count">0</span>
          <span id="cartTotalTop" class="cart-total">0 soâ€˜m</span>
        </div>
        <button id="adminAccessBtn" class="btn-ghost">ğŸ‘‘ Admin uchun</button>
      </div>
    </header>

    <!-- TABS -->
    <nav id="tabs" class="tabs">
      <button class="tab-btn active" data-page="shopPage">ğŸ› Magazin</button>
      <button class="tab-btn" data-page="ordersPage">ğŸ“¦ Buyurtmalarim</button>
      <button id="adminTabBtn" class="tab-btn hidden" data-page="adminPage">ğŸ‘‘ Admin panel</button>
    </nav>

    <!-- PAGES WRAPPER -->
    <main class="pages">

      <!-- SHOP PAGE -->
      <section id="shopPage" class="page">
        <!-- QIDIRUV + Mijoz info -->
        <div class="top-bar">
          <div class="search-wrap">
            <input
              id="searchInput"
              type="search"
              placeholder="Mahsulot qidirish..."
              autocomplete="off"
            />
          </div>
        </div>

        <div class="customer-info-row">
          <span id="customerInfoText">
            Mijoz maâ€™lumotlari saqlanmagan. Buyurtma berganingizda ism va telefon soâ€˜raladi.
          </span>
          <div class="customer-info-actions">
            <button class="btn-xs" onclick="editCustomerInfo()">âœï¸ Oâ€˜zgartirish</button>
            <button class="btn-xs btn-xs-danger" onclick="resetCustomerInfo()">ğŸ—‘ Oâ€˜chirish</button>
          </div>
        </div>

        <!-- CATEGORY FILTER -->
        <div id="filterBar" class="filter-bar">
          <!-- JS orqali chiplar -->
        </div>

        <!-- PRODUCTS GRID -->
        <section id="productsGrid" class="products-grid">
          <!-- JS orqali kartalar -->
        </section>

      </section>

      <!-- ORDERS PAGE -->
      <section id="ordersPage" class="page hidden">
        <header class="section-header">
          <h2>ğŸ“¦ Buyurtmalarim</h2>
          <p>Bu yerda barcha buyurtmalaringiz holatini kuzatishingiz mumkin.</p>
        </header>
        <div id="clientOrdersList" class="orders-list">
          <!-- JS orqali toâ€˜ladi -->
        </div>
      </section>

      <!-- ADMIN PAGE -->
      <section id="adminPage" class="page hidden">
        <header class="section-header">
          <h2>ğŸ‘‘ Admin panel</h2>
          <p>Mahsulotlar, kategoriyalar, kuryerlar va buyurtmalarni boshqarish.</p>
        </header>

        <!-- ADMIN TABS ICHIDA BOâ€˜LISHI MUMKIN, HOZIRCHA 3 BLOKGA BOâ€˜LDIM -->

        <!-- 1) KATEGORIYA BOSHQARUVI -->
        <section class="admin-section">
          <h3>ğŸ“‚ Kategoriyalar</h3>
          <div class="admin-form-row">
            <div class="form-group">
              <label for="adminCatCode">Kategoriya kodi (masalan, lipstick)</label>
              <input id="adminCatCode" type="text" placeholder="kod (lotincha, kichik harflar)" />
            </div>
            <div class="form-group">
              <label for="adminCatLabel">Kategoriya nomi</label>
              <input id="adminCatLabel" type="text" placeholder="Masalan, Pomada" />
            </div>
            <div class="form-group">
              <label for="adminCatEmoji">Emoji</label>
              <input id="adminCatEmoji" type="text" placeholder="ğŸ’„" />
            </div>
          </div>
          <button class="btn-primary admin-btn-sm" onclick="saveCategory()">ğŸ’¾ Kategoriyani saqlash</button>

          <div id="adminCategoryList" class="admin-list">
            <!-- JS orqali -->
          </div>
        </section>

        <!-- 2) MAHSULOT BOSHQARUVI -->
        <section class="admin-section">
          <h3>ğŸ› Mahsulotlar</h3>
          <div class="admin-form">
            <div class="form-group">
              <label for="adminName">Mahsulot nomi</label>
              <input id="adminName" type="text" placeholder="Masalan, Matte Lipstick" />
            </div>

            <div class="form-group">
              <label for="adminCategory">Kategoriya</label>
              <select id="adminCategory">
                <!-- JS orqali kategoriyalar -->
              </select>
            </div>

            <div class="form-group">
              <label for="adminPriceBase">Asosiy narx (soâ€˜m)</label>
              <input id="adminPriceBase" type="number" min="0" placeholder="Masalan, 150000" />
            </div>

            <div class="form-group row-inline">
              <label>
                <input id="adminHasDiscount" type="checkbox" />
                Chegirma bor
              </label>
              <input
                id="adminPriceDiscount"
                type="number"
                min="0"
                placeholder="Chegirma narxi (ixtiyoriy)"
              />
            </div>

            <div class="form-group">
              <label for="adminTag">Qisqa tag (masalan, bestseller, yangi)</label>
              <input id="adminTag" type="text" placeholder="Masalan, Bestseller" />
            </div>

            <div class="form-group">
              <label for="adminDescription">Tavsif</label>
              <textarea
                id="adminDescription"
                rows="3"
                placeholder="Mahsulot haqida batafsil tavsif"
              ></textarea>
            </div>

            <div class="form-group">
              <label for="adminImages">Rasmlar (vergul bilan, URL yoki fayl nomlari)</label>
              <textarea
                id="adminImages"
                rows="2"
                placeholder="masalan: pomada1, pomada2.jpg yoki https://.../image.png"
              ></textarea>
            </div>

            <button class="btn-primary admin-btn" onclick="addCustomProduct()">
              â• Mahsulotni qoâ€˜shish (Firestore)
            </button>
          </div>

          <div id="adminCustomList" class="admin-list">
            <!-- JS orqali -->
          </div>
        </section>

        <!-- 3) BUYURTMALAR (ADMIN) + KURYER PANELI -->
        <section class="admin-section">
          <h3>ğŸ“¦ Buyurtmalar (Admin)</h3>
          <div id="adminOrdersList" class="orders-list admin-orders-list">
            <!-- JS orqali -->
          </div>
        </section>

        <!-- 4) KURYER BOSHQARUVI (ADMIN) -->
        <section class="admin-section">
          <h3>ğŸš´â€â™‚ï¸ Kuryerlar</h3>

          <div class="admin-form">
            <div class="form-group">
              <label for="adminCourierName">Kuryer ismi</label>
              <input id="adminCourierName" type="text" placeholder="Masalan, Ali" />
            </div>
            <div class="form-group">
              <label for="adminCourierPhone">Telefon raqami</label>
              <input id="adminCourierPhone" type="text" placeholder="+99890 123 45 67" />
            </div>
            <div class="form-group">
              <label for="adminCourierCar">Mashina (model)</label>
              <input id="adminCourierCar" type="text" placeholder="masalan, Cobalt oq" />
            </div>
            <div class="form-group">
              <label for="adminCourierPlate">Davlat raqami</label>
              <input id="adminCourierPlate" type="text" placeholder="01 A 123 BC" />
            </div>
            <div class="form-group">
              <label for="adminCourierLogin">Login</label>
              <input id="adminCourierLogin" type="text" placeholder="kuryer login" />
            </div>
            <div class="form-group">
              <label for="adminCourierPassword">Parol</label>
              <input id="adminCourierPassword" type="text" placeholder="kuryer paroli" />
            </div>

            <button id="adminCourierSaveBtn" class="btn-primary admin-btn-sm">
              ğŸ’¾ Kuryerni saqlash
            </button>
          </div>

          <div id="adminCourierList" class="admin-list">
            <!-- JS orqali kuryerlar -->
          </div>
        </section>

        <!-- 5) KURYER XARITA PANELI -->
        <section class="admin-section">
          <h3>ğŸ—º Kuryer xaritasi (GPS)</h3>
          <div class="form-group">
            <label for="courierOrderSelect">Kuryerda boâ€˜lgan buyurtmani tanlang</label>
            <select id="courierOrderSelect">
              <option value="">Kuryerda buyurtma yoâ€˜q</option>
            </select>
          </div>

          <div class="map-panel">
            <iframe
              id="courierMapFrame"
              src=""
              width="100%"
              height="260"
              style="border:0;"
              allowfullscreen
              loading="lazy">
            </iframe>
          </div>

          <div id="courierInfo" class="courier-info">
            Kuryerga berilgan va GPS bilan saqlangan buyurtma topilmadi.
          </div>

          <div class="map-actions">
            <button class="btn-xs" onclick="openSelectedCourierExternal()">
              ğŸ“ Google Mapsâ€™da ochish
            </button>
            <button class="btn-xs btn-xs-primary" onclick="centerToCourier()">
              ğŸš— Mening joylashuvimdan marshrut
            </button>
          </div>
        </section>

      </section>
    </main>

    <!-- QUICK ORDER FLOAT BUTTON -->
    <button
      id="quickOrderBtn"
      class="quick-order-btn hidden"
      onclick="toggleCartSheet(true)">
      ğŸ›’ Savat (ochish)
    </button>
  </div>

  <!-- SCRIPT -->
  <script type="module" src="app.js"></script>
</body>
</html>
